# フルーリオ幾何学 重要証明 優先実装計画（Phase G-Proofs）

バージョン: 1.0
対象: FG 基盤の「証明」を最短導入する高優先タスク（最大5件）
関連: design/10.md, papers/m点幾何学1-7.md, papers/代数学.md

## 0. 目的と範囲
- 目的: FG のコア主張（EVI/Doob/Mosco/同期/スケール）を Lean で「実証」へ進めるため、最短経路の5タスクを定義。
- 範囲: 既存の Prop スタブを定理へ段階昇格。解析重量は必要最小限。既存 API を破壊しないこと。

## 1. 優先タスク一覧（上から順に着手）

1) EVI 収縮の実証（同一生成子）
- 目的: `evi_contraction` を定理化し、`dist (u t) (v t) ≤ exp (-λ t) dist (u 0) (v 0)` を証明。
- 要点: Dini 上側微分の基本補題、EVI を両解に適用→加算→Grönwall で収縮。
- 影響: `Frourio/Analysis/EVI.lean:1`（`DiniUpper`補題追加、`eviContraction` を theorem 化）。
- 依存: メトリック勾配流の標準補題（上側微分の劣加法、実関数の Grönwall）。
- 受入基準: `theorem eviContraction …`（`IsEVISolution`×2 ⇒ 収縮）の実証、インライン docstring に証明方針を記述。

2) スケール則（等長/相似）の定式化と証明
- 目的: `evi_scale_rule` を二分（α=0/α>0）し、`λ' = Λ^{(κ-2α)k} λ` の形で EVI を保存することを明示・証明。
- 要点: 時間再標定（等長）、距離スケールの二乗と EVI 係数の整合（相似）。
- 影響: `Frourio/Geometry/FGTheorems.lean:1`（`evi_scale_rule_isometry`, `evi_scale_rule_similarity` を追加）。
- 依存: 1)の `DiniUpper` 補助、`effectiveLambda`（`FGCore.lean:1`）。
- 受入基準: 2 つの定理が Prop でなく theorem として成立し、`FGInterop` 経由で使用可能。

3) Doob 変換：Γ 等式と Γ₂ 補正式→CD 係数シフト
- 目的: `doob_gamma_eq`/`doob_gamma2_eq` を仮定パックの下で定理化し、`cd_parameter_shift` による λ の劣化/保存を示す。
- 要点: Leibniz/チェイン則・Bochner 型恒等式の最小公理下での展開。`Γ^h=Γ`, `Γ₂^h=Γ₂-2⟨∇² log h ∇f,∇f⟩` の導出。
- 影響: `Frourio/Analysis/DoobTransform.lean:1`（仮定強化、定理化、CD 係数の corollary 追加）。
- 依存: 1)に独立。測度論・滑らかさを仮定としてパック化。
- 受入基準: Doob 三点セットの theorem 化と、`cd_parameter_shift` の定量結論（不等式）を提示。

4) Mosco 継承：EVI の極限安定（JKO 経由の骨子）
- 目的: `Mosco` 述語を非自明化（`MoscoTight/M1/M2`）し、`eviInheritance` を「EVI が極限で成立」の命題から定理へ昇格。
- 要点: Γ-liminf と回復列、狭義緊性、`Ent` の l.s.c. を仮定に含め、EVI の極限継承を示す。
- 影響: `Frourio/Analysis/EVI.lean:1`（述語の精緻化と定理化）、`Frourio/Geometry/FGTheorems.lean:1`（re-export を theorem へ）。
- 依存: 1)の EVI 補助は再利用可。証明はスケッチ＋主要補題のみでも可。
- 受入基準: `MoscoAssumptions` が非自明 `Prop` に置換され、`eviInheritance` が theorem になる。

5) two-EVI 同期：混合ドリフト誤差付きの収縮評価
- 目的: `evi_sum_with_error` を、mixed drift `R(p_t,q_t)` の明示境界 η の下での収縮不等式として定理化。
- 要点: 二つの EVI を相互に適用→加算→交差項を Young/Cauchy–Schwarz で評価→`(1/2) d^+/dt W^2 + λ W^2 ≤ η`。
- 影響: `Frourio/Analysis/EVI.lean:1`（`MixedErrorBound` を具体化）、`Frourio/Geometry/FGTheorems.lean:1`（定理化）。
- 依存: 1)の Dini/Grönwall、4)に独立。
- 受入基準: `η=0` で指数収縮、`η>0` でグローバル上界が導かれる corollary を併記。

## 2. 実装順序と見積り
- S1: Task 1（EVI 収縮）: 0.5–1.5 日（補助補題の整備を含む）
- S2: Task 2（スケール則）: 0.5–1 日（S1 の補題を再利用）
- S3: Task 3（Doob）: 1–2 日（仮定パック整備）
- S4: Task 4（Mosco）: 1.5–3 日（述語精緻化）
- S5: Task 5（同期）: 0.5–1 日（S1 補助再利用）

## 3. 影響範囲（主要ファイル）
- EVI 層: `Frourio/Analysis/EVI.lean:1`
- Doob: `Frourio/Analysis/DoobTransform.lean:1`
- FG 定理: `Frourio/Geometry/FGTheorems.lean:1`
- FG コア: `Frourio/Geometry/FGCore.lean:1`（`effectiveLambda` 参照）

## 4. リスクと緩和
- Dini/Grönwall の汎用版が重くなる可能性 → 局所版（リプシッツ/AC 曲線に限定）から導入し、後で一般化。
- Doob の滑らかさ要件が Lean 化困難 → `DoobAssumptions` を class/structure に整理し、定理はその下で提示。
- Mosco のトポロジー選択が複雑 → `Xh → X` の埋め込みを 1–2 例に限定し、抽象度を抑える。

## 5. 受入基準（総合）
- 5 つのタスクについて、対応する theorem と補助補題が作成され、`Frourio.lean:1` 経由でエクスポート可能。
- 既存 API を破壊しない。`sorry`/`axiom` 不使用。
- 各定理に 3–5 行の証明スケッチをモジュール先頭に Docstring として記載。

## 6. マイルストーン
- M1: EVI 収縮の定理化（S1 完了）
- M2: スケール則の定理化（S2 完了）
- M3: Doob 三点セットの定理化（S3 完了）
- M4: Mosco 継承の定理化（S4 完了）
- M5: 同期定理とコロラリ（S5 完了）

